<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><link rel="canonical" href="https://jarbashivemind.github.io/HiveMind-community-docs/03_pairing/" />
      <link rel="shortcut icon" href="../img/favicon.ico" />
    <title>Pairing - Documentation</title>
    <link rel="stylesheet" href="../css/theme.css" />
    <link rel="stylesheet" href="../css/theme_extra.css" />
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/styles/github.min.css" />
    
      <script>
        // Current page data
        var mkdocs_page_name = "Pairing";
        var mkdocs_page_input_path = "03_pairing.md";
        var mkdocs_page_url = "/HiveMind-community-docs/03_pairing/";
      </script>
    
    <!--[if lt IE 9]>
      <script src="../js/html5shiv.min.js"></script>
    <![endif]-->
      <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/highlight.min.js"></script>
      <script>hljs.highlightAll();</script> 
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
    <div class="wy-side-scroll">
      <div class="wy-side-nav-search">
          <a href=".." class="icon icon-home"> Documentation
        </a><div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../search.html" method="get">
      <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" title="Type search term here" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="..">Home</a>
                </li>
              </ul>
              <p class="caption"><span class="caption-text">About</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../01_quickstart/">Quick start</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../02_terminology/">Terminology</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../05_presence/">Auto Discovery</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../15_nested/">Nested Hives</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../04_plugins/">Plugins</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">Servers</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../06_skills_server/">Skills Server</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../06_sound_server/">Sound Server</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../08_persona/">Persona Server</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">Satellites</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../07_voicesat/">Voice Satellite</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../07_voice_relay/">Voice Relay</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../07_micsat/">Mic Satellite</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">Integrations</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../09_matrix/">Matrix</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../10_deltachat/">DeltaChat</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../07_homeassistant/">Home Assistant</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">Protocol</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../04_protocol/">Transport</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../18_binarization/">Binarization</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../13_mycroft/">OVOS Messages</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">Security</span></p>
              <ul class="current">
                  <li class="toctree-l1"><a class="reference internal" href="../17_database/">Database</a>
                  </li>
                  <li class="toctree-l1 current"><a class="reference internal current" href="#">Pairing</a>
    <ul class="current">
    <li class="toctree-l2"><a class="reference internal" href="#command-line-pairing">Command Line Pairing</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#audio-pairing-via-ggwave">Audio Pairing via GGWave</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#the-identity-file">The Identity File</a>
        <ul>
    <li class="toctree-l3"><a class="reference internal" href="#contents-of-the-identity-file">Contents of the identity file</a>
        <ul>
    <li class="toctree-l4"><a class="reference internal" href="#public-key">Public Key</a>
    </li>
    <li class="toctree-l4"><a class="reference internal" href="#private-key">Private Key</a>
    </li>
        </ul>
    </li>
        </ul>
    </li>
    </ul>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../16_permissions/">Permissions</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../12_handshake/">Handshake</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../19_crypto/">Encryption</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">Developers</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../11_devs/">Libraries</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">ChatGPT was here</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../gpt_eli5/">ELI5</a>
                  </li>
              </ul>
      </div>
    </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">
      <nav class="wy-nav-top" role="navigation" aria-label="Mobile navigation menu">
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="..">Documentation</a>
        
      </nav>
      <div class="wy-nav-content">
        <div class="rst-content"><div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href=".." class="icon icon-home" aria-label="Docs"></a></li>
          <li class="breadcrumb-item">Security</li>
      <li class="breadcrumb-item active">Pairing</li>
    <li class="wy-breadcrumbs-aside">
    </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
            <div class="section" itemprop="articleBody">
              
                <h1 id="pairing-devices">Pairing devices</h1>
<p>You can register clients in a Mind via command line or via audio</p>
<h2 id="command-line-pairing">Command Line Pairing</h2>
<p>First, you need to register the satellite devices in the HiveMind <strong>server</strong></p>
<pre><code class="language-bash">$ hivemind-core add-client
Credentials added to database!

Node ID: 2
Friendly Name: HiveMind-Node-2
Access Key: 5a9e580a2773a262cbb23fe9759881ff
Password: 9b247ca66c7cd2b6388ad49ca504279d
Encryption Key: 4185240103de0770
WARNING: Encryption Key is deprecated, only use if your client does not support password
</code></pre>
<p>And then set the identity file in the <strong>satellite</strong> device</p>
<pre><code class="language-bash">$ hivemind-client set-identity --key 5a9e580a2773a262cbb23fe9759881ff --password 9b247ca66c7cd2b6388ad49ca504279d --host 0.0.0.0 --port 5678 --siteid test
identity saved: /home/miro/.config/hivemind/_identity.json
</code></pre>
<p>check the created identity file if you like</p>
<pre><code class="language-bash">$ cat ~/.config/hivemind/_identity.json
{
    &quot;password&quot;: &quot;9b247ca66c7cd2b6388ad49ca504279d&quot;,
    &quot;access_key&quot;: &quot;5a9e580a2773a262cbb23fe9759881ff&quot;,
    &quot;site_id&quot;: &quot;test&quot;,
    &quot;default_port&quot;: 5678,
    &quot;default_master&quot;: &quot;ws://0.0.0.0&quot;
}
</code></pre>
<p>test that a connection is possible using the identity file</p>
<pre><code class="language-bash">$ hivemind-client test-identity
(...)
2024-05-20 21:22:28.003 - OVOS - hivemind_bus_client.client:__init__:112 - INFO - Session ID: 34d75c93-4e65-4ea9-b5f4-87169dcfda01
(...)
== Identity successfully connected to HiveMind!
</code></pre>
<p>If the identity test passed, then your satellite is paired with the Hive!</p>
<h2 id="audio-pairing-via-ggwave">Audio Pairing via GGWave</h2>
<blockquote>
<p>ðŸš§ This feature is a proof-of-concept / work-in-progress</p>
</blockquote>
<p>Data over sound for HiveMind</p>
<p><code>hivemind-core</code> and <code>hivemind-voice-sat</code> have <code>hivemind-ggwave</code> support</p>
<p>pre-requisites:</p>
<ul>
<li>
<p>a device with a browser, eg a phone</p>
</li>
<li>
<p>a hivemind-core device with mic and speaker, eg a mark2</p>
</li>
<li>
<p>a (unpaired) voice satellite device with mic and speaker, eg a raspberry pi</p>
</li>
<li>
<p>all devices need to be in audible range, they each need to be able to listen to sounds emitted by each other</p>
</li>
</ul>
<p>workflow:</p>
<ul>
<li>
<p>when launching hivemind-core take note of the provided code, eg <code>HMPSWD:ce357a6b59f6b1f9</code></p>
</li>
<li>
<p>copy paste the code and emit it via ggwave (see below)</p>
</li>
<li>
<p>the voice satellite will decode the password, generate an access key and send it back via ggwave</p>
</li>
<li>
<p>master adds a client with key + password, send an ack (containing host) via ggwave</p>
</li>
<li>
<p>satellite devices get the ack then connect to received host</p>
</li>
</ul>
<p><img alt="img_9.png" src="../img_9.png" /></p>
<ul>
<li>manually exchanged string <a href="https://jarbashivemind.github.io/hivemind-ggwave/">via browser</a></li>
</ul>
<iframe src="https://jarbashivemind.github.io/hivemind-ggwave"></iframe>

<ul>
<li>with a <a href="https://github.com/ggerganov/ggwave/discussions/27">talking button</a></li>
</ul>
<video src="https://user-images.githubusercontent.com/1991296/166411509-5e1b9bcb-3655-40b1-9dc3-9bec72889dcf.mp4" width="320"></video>

<h2 id="the-identity-file">The Identity File</h2>
<p>The identity file is a crucial component in the HiveMind ecosystem, as it stores the necessary credentials and settings for a node (device) to connect and communicate within the HiveMind network. This file ensures that the node can authenticate and maintain secure connections with other nodes.</p>
<p>While connection parameters can be set at launch time, this file provides a way to reuse them across the whole OS</p>
<h3 id="contents-of-the-identity-file">Contents of the identity file</h3>
<p>The identity file, typically located at <code>~/.config/hivemind/_identity.json</code>, contains the following information:</p>
<table>
<thead>
<tr>
<th>Field</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>name</code></td>
<td>A human-readable label for the node, which is not guaranteed to be unique.</td>
</tr>
<tr>
<td><code>password</code></td>
<td>The password used to generate a session AES key for secure communication within the HiveMind network.</td>
</tr>
<tr>
<td><code>access_key</code></td>
<td>A unique access key assigned to the node for identification and authentication.</td>
</tr>
<tr>
<td><code>site_id</code></td>
<td>An identifier for the physical location or context in which the node is operating.</td>
</tr>
<tr>
<td><code>default_port</code></td>
<td>The default port number used to connect to the HiveMind core.</td>
</tr>
<tr>
<td><code>default_master</code></td>
<td>The default host (address) of the HiveMind core that the node connects to.</td>
</tr>
<tr>
<td><code>public_key</code></td>
<td>The ASCII-encoded public PGP key used for authenticating the node within the HiveMind network.</td>
</tr>
<tr>
<td><code>secret_key</code></td>
<td>The path to the private PGP key file, which uniquely identifies the node and proves its identity.</td>
</tr>
</tbody>
</table>
<p>By maintaining these details in the identity file, nodes can securely and efficiently participate in the HiveMind network, facilitating a seamless and secure distributed communication environment.</p>
<p>If a node needs to securely communicate or authenticate another (that isn't the master) it can do so via the public key. See the section for <a href="https://jarbashivemind.github.io/HiveMind-community-docs/12_hive/#intercom">intercom messages</a> for more details</p>
<p>Groups of devices can also be targeted via their <code>site_id</code>, for example, we can <a href="https://jarbashivemind.github.io/HiveMind-community-docs/04_protocol/#propagate-message">propagate</a> a speak message to announce dinner is ready or <a href="https://jarbashivemind.github.io/HiveMind-community-docs/04_protocol/#broadcast-message">broadcast</a> a bus message to order all devices in a certain area equipped with a camera to take a picture. </p>
<h4 id="public-key">Public Key</h4>
<p>The Public Key in the identity file is part of a PGP key pair used to uniquely identify the node. This key serves several purposes:</p>
<ol>
<li>
<p><strong>Unique Node Identification:</strong> The PGP key uniquely identifies this node within the HiveMind network, ensuring that each node can be distinctly recognized.</p>
</li>
<li>
<p><strong>Inter-Node Authentication:</strong> Nodes can use the PGP key to authenticate each other, providing a layer of security that ensures only authorized nodes can communicate within the network.</p>
</li>
<li>
<p><strong>Network Independence:</strong> The PGP key allows nodes to identify each other regardless of the specific HiveMind core (mind) they are connected to. This means that even if nodes switch Minds, they can still recognize and authenticate each other using their PGP keys.</p>
</li>
</ol>
<h4 id="private-key">Private Key</h4>
<p>The Private Key is the only way for a node to read a message encrypted with it's corresponding public key. This file must be kept safe and private at all times!</p>
<p>By default, the private key is stored in <code>~/.config/hivemind/HiveMindComs.asc</code></p>
<p>If you believe your private key has been compromised, or simply want to change keys you can use the <code>hivemind-client reset-pgp</code> command</p>
              
            </div>
          </div><footer>
    <div class="rst-footer-buttons" role="navigation" aria-label="Footer Navigation">
        <a href="../17_database/" class="btn btn-neutral float-left" title="Database"><span class="icon icon-circle-arrow-left"></span> Previous</a>
        <a href="../16_permissions/" class="btn btn-neutral float-right" title="Permissions">Next <span class="icon icon-circle-arrow-right"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
  </div>

  Built with <a href="https://www.mkdocs.org/">MkDocs</a> using a <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
</footer>
          
        </div>
      </div>

    </section>

  </div>

  <div class="rst-versions" role="note" aria-label="Versions">
  <span class="rst-current-version" data-toggle="rst-current-version">
    
    
      <span><a href="../17_database/" style="color: #fcfcfc">&laquo; Previous</a></span>
    
    
      <span><a href="../16_permissions/" style="color: #fcfcfc">Next &raquo;</a></span>
    
  </span>
</div>
    <script src="../js/jquery-3.6.0.min.js"></script>
    <script>var base_url = "..";</script>
    <script src="../js/theme_extra.js"></script>
    <script src="../js/theme.js"></script>
      <script src="../search/main.js"></script>
    <script>
        jQuery(function () {
            SphinxRtdTheme.Navigation.enable(true);
        });
    </script>

</body>
</html>
